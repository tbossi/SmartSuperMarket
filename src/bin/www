#!/usr/bin/env node
'use strict';
const httpServer = require('../servers/http-server');
const tcpServer = require('../servers/tcp-server');

const ioDevice = require('../devices/io-device');
const digitalDevice = require('../devices/digital-device');
const analogicalDevice = require('../devices/analogical-device');
const smartSupermarket = require('../smart-supermarket');

class serverContainer {
    constructor(...servers) {
        this.servers = servers;
    }

    start() {
        this.servers.forEach(s => s.start());
    }
}

const device1 = new ioDevice("device#1");
device1.addDevice(0, new digitalDevice("sensor1", false));
device1.addDevice(1, new analogicalDevice("asd", 15.06));

const smartSupermarketApp = new smartSupermarket(device1);

new serverContainer(
    new httpServer(process.env.PORT || '3000', smartSupermarketApp),
    new tcpServer(9090, device1)
).start();